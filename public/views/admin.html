<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/public/styles/main.css">
    <link rel="stylesheet" href="/public/styles/admin.css">
    <title>DreamBo | Admin Panel</title>
</head>
<body>
    <div class="admin-container">
        <aside class="sidebar">
            <div class="brand">
                <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="#F472B6" viewBox="0 0 256 256">
                    <path d="M192,116a12,12,0,1,1-12-12A12,12,0,0,1,192,116ZM152,64H112a8,8,0,0,0,0,16h40a8,8,0,0,0,0-16Zm96,48v32a24,24,0,0,1-24,24h-2.36l-16.21,45.38A16,16,0,0,1,190.36,224H177.64a16,16,0,0,1-15.07-10.62L160.65,208h-57.3l-1.92,5.38A16,16,0,0,1,86.36,224H73.64a16,16,0,0,1-15.07-10.62L46,178.22a87.69,87.69,0,0,1-21.44-48.38A16,16,0,0,0,16,144a8,8,0,0,1-16,0,32,32,0,0,1,24.28-31A88.12,88.12,0,0,1,112,32H216a8,8,0,0,1,0,16H194.61a87.93,87.93,0,0,1,30.17,37c.43,1,.85,2,1.25,3A24,24,0,0,1,248,112Zm-16,0a8,8,0,0,0-8-8h-3.66a8,8,0,0,1-7.64-5.6A71.9,71.9,0,0,0,144,48H112A72,72,0,0,0,58.91,168.64a8,8,0,0,1,1.64,2.71L73.64,208H86.36l3.82-10.69A8,8,0,0,1,97.71,192h68.58a8,8,0,0,1,7.53,5.31L177.64,208h12.72l18.11-50.69A8,8,0,0,1,216,152h8a8,8,0,0,0,8-8Z"></path>
                </svg>
                <h2>DreamBo</h2>
            </div>
            
            <nav class="menu">
                <a href="/admin" class="menu-item active">ðŸ‘¥ UÅ¼ytkownicy</a>
                <a href="/logout" class="menu-item" style="margin-top: auto; color: #EF4444;">ðŸšª Wyloguj</a>
            </nav>
        </aside>

        <main class="content">
            <header class="top-bar">
                <h1>Panel Administratora</h1>
                <p>ZarzÄ…dzaj spoÅ‚ecznoÅ›ciÄ… i monitoruj postÄ™py marzeÅ„.</p>
            </header>

            <div class="table-wrapper">
                <table class="styled-table">
                    <thead>
                        <tr>
                            <th>UÅ¼ytkownik</th>
                            <th>Email</th>
                            <th>Rola</th>
                            <th>AktywnoÅ›Ä‡</th>
                            <th>Akcje</th>
                        </tr>
                    </thead>
                    <tbody>
                        <?php if (isset($users)): ?>
                            <?php foreach ($users as $user): ?>
                            <tr>
                                <td>
                                    <div class="user-cell">
                                        <img src="/public/uploads/<?= $user->avatarUrl ?: 'default-avatar.png' ?>" class="user-img">
                                        <span class="user-name"><?= htmlspecialchars($user->firstName . ' ' . $user->lastName) ?></span>
                                    </div>
                                </td>
                                <td><span style="color: #999; font-size: 0.9rem;"><?= htmlspecialchars($user->email) ?></span></td>
                                <td>
                                    <span class="badge badge-<?= strtolower($user->role) ?>">
                                        <?= htmlspecialchars($user->role) ?>
                                    </span>
                                </td>
                                <td>
                                    <span class="goal-count"><?= $user->totalGoals ?></span> celÃ³w
                                </td>
                                <td>
                                    <form action="/deleteUser" method="POST" onsubmit="return confirm('Czy na pewno usunÄ…Ä‡ to konto?');">
                                        <input type="hidden" name="id" value="<?= $user->id ?>">
                                        <button type="submit" class="delete-btn">UsuÅ„</button>
                                    </form>
                                </td>
                            </tr>
                            <?php endforeach; ?>
                        <?php endif; ?>
                    </tbody>
                </table>
            </div>
        </main>
    </div>
</body>
</html>